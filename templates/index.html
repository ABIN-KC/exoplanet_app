<!DOCTYPE html>
<html>
<head>
  <title>Exoplanet Detector</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-dark text-light">
  <div class="container text-center mt-5">
    <h1>Exoplanet Detection AI</h1>
    <p>Enter the parameters below:</p>

    <div class="card bg-secondary p-4 mx-auto" style="max-width: 600px;">
      <div id="inputs"></div>
      <button id="predict-btn" class="btn btn-primary w-100 mt-3">Predict</button>
      <h4 class="mt-3" id="output"></h4>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Model feature names
      const featureNames = [
        "koi_score",
        "koi_fpflag_nt",
        "koi_fpflag_ss",
        "koi_fpflag_co",
        "koi_fpflag_ec",
        "koi_period",
        "koi_time0bk",
        "koi_impact",
        "koi_duration",
        "koi_depth",
        "koi_prad",
        "koi_teq",
        "koi_insol",
        "koi_model_snr",
        "koi_steff",
        "koi_slogg",
        "koi_srad",
        "koi_kepmag"
      ];

      // Friendly labels for users
      const friendlyLabels = [
        "Disposition Score",
        "Not Transit-Like False Positive Flag",
        "Stellar Eclipse False Positive Flag",
        "Centroid Offset False Positive Flag",
        "Ephemeris Match Indicates Contamination False Positive Flag",
        "Orbital Period [days]",
        "Transit Epoch [BKJD]",
        "Impact Parameter",
        "Transit Duration [hrs]",
        "Transit Depth [ppm]",
        "Planetary Radius [Earth radii]",
        "Equilibrium Temperature [K]",
        "Insolation Flux [Earth flux]",
        "Transit Signal-to-Noise",
        "Stellar Effective Temperature [K]",
        "Stellar Surface Gravity [log10(cm/s**2)]",
        "Stellar Radius [Solar radii]",
        "Kepler-band [mag]"
      ];

      // Container div for inputs
      const inputsDiv = document.getElementById("inputs");

      // Create 18 inputs dynamically
      featureNames.forEach((name, idx) => {
        const label = document.createElement("label");
        label.innerText = friendlyLabels[idx];
        label.className = "form-label mt-2 text-start";
        label.style.display = "block";

        const input = document.createElement("input");
        input.type = "number";
        input.className = "form-control";
        input.id = name;
        input.placeholder = friendlyLabels[idx];

        inputsDiv.appendChild(label);
        inputsDiv.appendChild(input);
      });

      // Predict button click
      document.getElementById("predict-btn").addEventListener("click", async () => {
        const inputData = {};
        featureNames.forEach(name => {
          const value = parseFloat(document.getElementById(name).value);
          inputData[name] = isNaN(value) ? 0 : value; // default 0 if empty
        });

        try {
          const response = await fetch("https://exoplanet-zotp.onrender.com/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(inputData)
          });

          const data = await response.json();
          const output = document.getElementById("output");
          if (data.prediction === "1") {
            output.innerText = "Exoplanet";
            output.style.color = "lime";
          } else {
            output.innerText = "Not Exoplanet";
            output.style.color = "red";
          }
        } catch (err) {
          document.getElementById("output").innerText = "Error connecting to API";
          document.getElementById("output").style.color = "yellow";
          console.error(err);
        }
      });
    });
  </script>
</body>
</html>
